<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>نموذج موجز تصميم شعار</title>

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18 UMD -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel لتشغيل JSX داخل الصفحة -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- خط عربي واضح (اختياري) -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* لوحة ألوان قريبة من واجهة المحادثة */
      --bg: #0b0b0f;           /* خلفية الصفحة */
      --card: #111317;         /* بطاقات/أقسام */
      --muted: #1b1e24;        /* حقول الإدخال */
      --border: #2a2f39;       /* الحدود */
      --text: #e6e8ec;         /* النص الأساسي */
      --subtle: #b6bcc7;       /* نص ثانوي/placeholder */
      --accent: #ffffff;       /* زر فاتح */
      --accentText: #0b0b0f;   /* نص الزر */
    }

    html,body{
      background: var(--bg);
      color: var(--text);
      font-family: "Tajawal", system-ui, -apple-system, "Segoe UI", Tahoma, Arial, "Noto Sans", "Helvetica Neue", Helvetica, sans-serif;
    }

    header{
      position: sticky; top: 0; z-index: 10;
      backdrop-filter: blur(6px);
      background: #0b0b0fCC;
      border-bottom: 1px solid var(--border);
    }

    section{
      background: color-mix(in oklab, var(--card) 92%, transparent);
      border: 1px solid var(--border);
      border-radius: 16px;
    }

    /* الحقول: نص واضح + placeholder أفتح + حدود */
    input, select, textarea{
      background: var(--muted) !important;
      color: var(--text) !important;
      border: 1px solid var(--border) !important;
    }
    input::placeholder, textarea::placeholder{ color: var(--subtle) !important; opacity: 1 !important; }

    /* فوكس مميّز */
    input:focus, select:focus, textarea:focus, button:focus{
      outline: none !important;
      box-shadow: 0 0 0 2px #ffffff22, 0 0 0 4px #ffffff44;
      border-color: #ffffff66 !important;
    }

    /* زر الإرسال */
    .btn-send{
      background: var(--accent) !important;
      color: var(--accentText) !important;
      border: 1px solid var(--border);
      transition: transform .06s ease, background .2s ease, opacity .2s ease;
    }
    .btn-send:hover{ background:#e9e9e9 !important; transform: translateY(-1px); }
    .btn-send:active{ transform: translateY(0); }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // ---------- الإعدادات ----------
    const personalityOptions = ["حديث","فخم","بسيط","مرح","رسمي","تراثي","تقني","طبيعي","جريء","ودي"];
    const usageOptions = ["وسائل التواصل","موقع إلكتروني","طباعة كبيرة","ورق رسمي","واجهات محلات","تطريز","أيقونة تطبيق","Favicon","أختام/ختم رسمي"];
    const logoTypeOptions = [
      { value: "wordmark", label: "نصي (Wordmark)" },
      { value: "symbol", label: "رمز/أيقونة" },
      { value: "combination", label: "مزيج (نص + رمز)" },
      { value: "lettermark", label: "أحرف مختصرة (Lettermark)" },
    ];
    const langOptions = [
      { value: "ar", label: "عربي" },
      { value: "en", label: "إنجليزي" },
      { value: "bi", label: "ثنائي اللغة" },
    ];

    // ضع رابط Formspree هنا
    const FORMSPREE_ENDPOINT = "https://formspree.io/f/mzzkaegk"; // ← استبدله برابطك

    function LogoBriefForm(){
      const [data, setData] = useState({
        brandNameAr: "", brandNameEn: "", logoLanguage: "ar",
        oneLineDesc: "", goal: "", audience: "", personality: [],
        colorsPreferred: "", colorsAvoided: "",
        likedLogos: [{ url: "", why: "" }],
        dislikedLogos: [{ url: "", why: "" }],
        usages: [], logoType: "combination",
        symbolsInclude: "", symbolsAvoid: "",
        mission: "", values: "",
        competitors: [{ name: "", url: "", note: "" }],
        differentiation: "", languageNotes: "", constraints: "",
        deliverables: {
          mainLogo: true, altLayouts: true, iconOnly: true,
          colorSystem: true, typography: true,
          shortGuidelines: true, fullGuidelines: false, templates: false,
        },
        notes: "",
      });
      const [sending, setSending] = useState(false);

      useEffect(() => {
        // self-tests بسيطة في الكونسول
        const tests = [];
        const t = (name, pass, details="") => { tests.push({name, pass, details}); (pass?console.log:console.error)(`[LogoBriefTest] ${pass?'✅':'❌'} ${name}`, details); };
        t("langOptions Array", Array.isArray(langOptions));
        t("logoTypeOptions contains combination", logoTypeOptions.some(o => o.value === "combination"));
        t("FORMSPREE_ENDPOINT set", typeof FORMSPREE_ENDPOINT === "string" && FORMSPREE_ENDPOINT.startsWith("https://"));
        window.__LOGO_BRIEF_TESTS__ = tests;
      }, []);

      // Helpers
      const handleChange = (field, value) => setData(d => ({ ...d, [field]: value }));
      const handleArrayChange = (field, index, subField, value) => {
        const arr = [...data[field]];
        arr[index] = { ...arr[index], [subField]: value };
        setData(d => ({ ...d, [field]: arr }));
      };
      const addRow = (field, template) => setData(d => ({ ...d, [field]: [...d[field], template] }));
      const removeRow = (field, i) => setData(d => ({ ...d, [field]: d[field].filter((_, idx) => idx !== i) }));
      const toggleMulti = (field, value) => {
        const s = new Set(data[field]);
        s.has(value) ? s.delete(value) : s.add(value);
        setData(d => ({ ...d, [field]: Array.from(s) }));
      };

      // إرسال إلى Formspree
      const handleSubmit = async () => {
        if (!FORMSPREE_ENDPOINT || !FORMSPREE_ENDPOINT.startsWith("https://")) {
          alert("فضلاً ضع رابط Formspree الصحيح في الكود.");
          return;
        }
        try {
          setSending(true);
          const payload = { timestamp: new Date().toISOString(), ...data };
          const res = await fetch(FORMSPREE_ENDPOINT, {
            method: "POST",
            headers: { "Accept": "application/json", "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });
          if (res.ok) {
            alert("تم الإرسال بنجاح ✅ (تحقّق من صندوق بريد Formspree)");
          } else {
            alert("تعذّر الإرسال. تأكّد من رابط Formspree أو جرّب لاحقًا.");
          }
        } catch (e) {
          alert("حدث خطأ أثناء الإرسال. حاول مجددًا.");
        } finally {
          setSending(false);
        }
      };

      return (
        <div dir="rtl" className="min-h-screen">
          <header className="border-b border-[var(--border)]">
            <div className="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between">
              <h1 className="text-2xl md:text-3xl font-semibold tracking-wide">نموذج موجز تصميم شعار</h1>
            </div>
          </header>

          <main className="max-w-5xl mx-auto px-4 py-8 grid gap-6">
            {/* (1) معلومات أساسية */}
            <section>
              <div className="p-5">
                <h2 className="text-xl font-semibold mb-4">١) معلومات أساسية</h2>
                <div className="grid md:grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm mb-1">اسم العلامة (عربي)</label>
                    <input className="w-full rounded-xl p-3" placeholder="مثال: وسـيط الأماكن" value={data.brandNameAr} onChange={e=>handleChange('brandNameAr', e.target.value)} />
                  </div>
                  <div>
                    <label className="block text-sm mb-1">اسم العلامة (إنجليزي)</label>
                    <input className="w-full rounded-xl p-3" placeholder="Example: Waseet Al-Amaken" value={data.brandNameEn} onChange={e=>handleChange('brandNameEn', e.target.value)} />
                  </div>
                  <div>
                    <label className="block text-sm mb-1">لغة الشعار</label>
                    <select className="w-full rounded-xl p-3" value={data.logoLanguage} onChange={e=>handleChange('logoLanguage', e.target.value)}>
                      {langOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm mb-1">وصف سريع للعلامة (سطر واحد)</label>
                    <input className="w-full rounded-xl p-3" placeholder="ماذا تفعل علامتك؟" value={data.oneLineDesc} onChange={e=>handleChange('oneLineDesc', e.target.value)} />
                  </div>
                  <div className="md:col-span-2">
                    <label className="block text-sm mb-1">هدف الشعار</label>
                    <input className="w-full rounded-xl p-3" placeholder="إطلاق/تحديث/تميّز…" value={data.goal} onChange={e=>handleChange('goal', e.target.value)} />
                  </div>
                </div>
              </div>
            </section>

            {/* (2) الجمهور والشخصية */}
            <section>
              <div className="p-5">
                <h2 className="text-xl font-semibold mb-4">٢) الجمهور والشخصية</h2>
                <div className="grid gap-4">
                  <div>
                    <label className="block text-sm mb-1">الجمهور المستهدف</label>
                    <textarea className="w-full rounded-xl p-3 min-h-[100px]" placeholder="العمر، الاهتمامات، الموقع…" value={data.audience} onChange={e=>handleChange('audience', e.target.value)} />
                  </div>
                  <div>
                    <label className="block text-sm mb-2">اختر 3 صفات للشخصية</label>
                    <div className="flex flex-wrap gap-2">
                      {personalityOptions.map(opt => {
                        const active = data.personality.includes(opt);
                        return (
                          <button type="button" key={opt}
                            onClick={()=>toggleMulti('personality', opt)}
                            className={`px-3 py-2 rounded-2xl border ${active ? 'bg-white text-black border-white' : 'border-[var(--border)] bg-[var(--muted)] hover:brightness-110'}`}>
                            {opt}
                          </button>
                        );
                      })}
                    </div>
                  </div>
                </div>
              </div>
            </section>

            {/* (3) الألوان والمراجع */}
            <section>
              <div className="p-5">
                <h2 className="text-xl font-semibold mb-4">٣) الألوان والمراجع</h2>
                <div className="grid md:grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm mb-1">ألوان مفضّلة</label>
                    <input className="w-full rounded-xl p-3" placeholder="مثال: أخضر زمردي، أسود، أبيض" value={data.colorsPreferred} onChange={e=>handleChange('colorsPreferred', e.target.value)} />
                  </div>
                  <div>
                    <label className="block text-sm mb-1">ألوان ممنوعة</label>
                    <input className="w-full rounded-xl p-3" placeholder="مثال: أحمر صارخ…" value={data.colorsAvoided} onChange={e=>handleChange('colorsAvoided', e.target.value)} />
                  </div>
                </div>

                <div className="grid md:grid-cols-2 gap-6 mt-4">
                  {/* شعارات مفضلة */}
                  <div>
                    <div className="flex items-center justify-between mb-2">
                      <label className="text-sm">أمثلة شعارات تعجبك</label>
                      <button className="text-xs px-2 py-1 rounded-xl border border-[var(--border)] bg-[var(--muted)] hover:brightness-110"
                        onClick={()=>addRow('likedLogos', {url:'', why:''})}>+ إضافة</button>
                    </div>
                    <div className="grid gap-3">
                      {data.likedLogos.map((row,i)=>(
                        <div key={i} className="grid grid-cols-12 gap-2 items-start">
                          <input className="col-span-5 rounded-xl p-2" placeholder="الرابط" value={row.url} onChange={e=>handleArrayChange('likedLogos', i, 'url', e.target.value)} />
                          <input className="col-span-6 rounded-xl p-2" placeholder="السبب" value={row.why} onChange={e=>handleArrayChange('likedLogos', i, 'why', e.target.value)} />
                          <button className="col-span-1 text-xs px-2 py-2 rounded-xl border border-[var(--border)] bg-[var(--muted)] hover:brightness-110"
                            onClick={()=>removeRow('likedLogos', i)}>حذف</button>
                        </div>
                      ))}
                    </div>
                  </div>

                  {/* شعارات غير مفضلة */}
                  <div>
                    <div className="flex items-center justify-between mb-2">
                      <label className="text-sm">أمثلة شعارات لا تعجبك</label>
                      <button className="text-xs px-2 py-1 rounded-xl border border-[var(--border)] bg-[var(--muted)] hover:brightness-110"
                        onClick={()=>addRow('dislikedLogos', {url:'', why:''})}>+ إضافة</button>
                    </div>
                    <div className="grid gap-3">
                      {data.dislikedLogos.map((row,i)=>(
                        <div key={i} className="grid grid-cols-12 gap-2 items-start">
                          <input className="col-span-5 rounded-xl p-2" placeholder="الرابط" value={row.url} onChange={e=>handleArrayChange('dislikedLogos', i, 'url', e.target.value)} />
                          <input className="col-span-6 rounded-xl p-2" placeholder="السبب" value={row.why} onChange={e=>handleArrayChange('dislikedLogos', i, 'why', e.target.value)} />
                          <button className="col-span-1 text-xs px-2 py-2 rounded-xl border border-[var(--border)] bg-[var(--muted)] hover:brightness-110"
                            onClick={()=>removeRow('dislikedLogos', i)}>حذف</button>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              </div>
            </section>

            {/* (4) الاستخدام ونوع الشعار */}
            <section>
              <div className="p-5">
                <h2 className="text-xl font-semibold mb-4">٤) الاستخدام ونوع الشعار</h2>
                <div className="grid gap-4">
                  <div>
                    <label className="block text-sm mb-2">أين سيُستخدم الشعار؟</label>
                    <div className="flex flex-wrap gap-2">
                      {usageOptions.map(u=>{
                        const active = data.usages.includes(u);
                        return (
                          <button key={u} type="button"
                            onClick={()=>toggleMulti('usages', u)}
                            className={`px-3 py-2 rounded-2xl border ${active ? 'bg-white text-black border-white' : 'border-[var(--border)] bg-[var(--muted)] hover:brightness-110'}`}>
                            {u}
                          </button>
                        );
                      })}
                    </div>
                  </div>
                  <div className="grid md:grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm mb-1">نوع الشعار المفضّل</label>
                      <select className="w-full rounded-xl p-3" value={data.logoType} onChange={e=>handleChange('logoType', e.target.value)}>
                        {logoTypeOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm mb-1">رموز/معانٍ ترغب بإدراجها</label>
                      <input className="w-full rounded-xl p-3" placeholder="مثال: أسهم، دوائر، سحب، حروف…" value={data.symbolsInclude} onChange={e=>handleChange('symbolsInclude', e.target.value)} />
                    </div>
                    <div>
                      <label className="block text-sm mb-1">رموز/معانٍ يجب تجنّبها</label>
                      <input className="w-full rounded-xl p-3" placeholder="مثال: حيوانات، وجوه بشرية…" value={data.symbolsAvoid} onChange={e=>handleChange('symbolsAvoid', e.target.value)} />
                    </div>
                  </div>
                </div>
              </div>
            </section>

            {/* (6) تفاصيل متقدمة (اختياري) */}
            <section>
              <div className="p-5">
                <h2 className="text-xl font-semibold mb-4">٦) تفاصيل متقدمة (اختياري)</h2>
                <div className="grid md:grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm mb-1">رسالة العلامة</label>
                    <input className="w-full rounded-xl p-3" placeholder="سطر موجز لرسالة العلامة" value={data.mission} onChange={e=>handleChange('mission', e.target.value)} />
                  </div>
                  <div>
                    <label className="block text-sm mb-1">القيم الأساسية</label>
                    <input className="w-full rounded-xl p-3" placeholder="3–5 كلمات" value={data.values} onChange={e=>handleChange('values', e.target.value)} />
                  </div>
                </div>

                <div className="mt-4">
                  <div className="flex items-center justify-between mb-2">
                    <label className="text-sm">منافسون مباشِرون</label>
                    <button className="text-xs px-2 py-1 rounded-xl border border-[var(--border)] bg-[var(--muted)] hover:brightness-110"
                      onClick={()=>addRow('competitors', { name:'', url:'', note:'' })}>+ إضافة</button>
                  </div>
                  <div className="grid gap-3">
                    {data.competitors.map((row,i)=>(
                      <div key={i} className="grid md:grid-cols-12 grid-cols-1 gap-2 items-start">
                        <input className="md:col-span-3 rounded-xl p-2" placeholder="الاسم" value={row.name} onChange={e=>handleArrayChange('competitors', i, 'name', e.target.value)} />
                        <input className="md:col-span-5 rounded-xl p-2" placeholder="الرابط" value={row.url} onChange={e=>handleArrayChange('competitors', i, 'url', e.target.value)} />
                        <input className="md:col-span-3 rounded-xl p-2" placeholder="ملاحظة" value={row.note} onChange={e=>handleArrayChange('competitors', i, 'note', e.target.value)} />
                        <button className="md:col-span-1 text-xs px-2 py-2 rounded-xl border border-[var(--border)] bg-[var(--muted)] hover:brightness-110"
                          onClick={()=>removeRow('competitors', i)}>حذف</button>
                      </div>
                    ))}
                  </div>
                </div>

                <div className="mt-4">
                  <label className="block text-sm mb-1">ما الذي يميزك؟</label>
                  <textarea className="w-full rounded-xl p-3 min-h-[80px]" placeholder="نقاط القوة والتميّز" value={data.differentiation} onChange={e=>handleChange('differentiation', e.target.value)} />
                </div>

                <div className="grid md:grid-cols-2 gap-4 mt-4">
                  <div>
                    <label className="block text-sm mb-1">ملاحظات حول اللغة/الكتابة</label>
                    <input className="w-full rounded-xl p-3" placeholder="التهجئة المعتمدة، حروف كبيرة/صغيرة…" value={data.languageNotes} onChange={e=>handleChange('languageNotes', e.target.value)} />
                  </div>
                  <div>
                    <label className="block text-sm mb-1">قيود تقنية/تنفيذية</label>
                    <input className="w-full rounded-xl p-3" placeholder="تطريز، حفر، لون واحد…" value={data.constraints} onChange={e=>handleChange('constraints', e.target.value)} />
                  </div>
                </div>

                <div className="mt-4">
                  <label className="block text-sm mb-2">المخرجات المطلوبة</label>
                  <div className="grid md:grid-cols-4 grid-cols-2 gap-2">
                    {Object.entries(data.deliverables).map(([k, v]) => (
                      <label key={k} className="flex items-center gap-2 bg-[var(--muted)] rounded-xl p-2 border border-[var(--border)]">
                        <input type="checkbox" checked={!!v} onChange={(e)=>setData(d=>({ ...d, deliverables: { ...d.deliverables, [k]: e.target.checked } }))} />
                        <span className="text-sm">
                          {k === 'mainLogo' && 'الشعار الرئيسي'}
                          {k === 'altLayouts' && 'بدائل (أفقي/رأسي)'}
                          {k === 'iconOnly' && 'أيقونة فقط'}
                          {k === 'colorSystem' && 'نظام ألوان'}
                          {k === 'typography' && 'خطوط'}
                          {k === 'shortGuidelines' && 'دليل مختصر'}
                          {k === 'fullGuidelines' && 'دليل كامل'}
                          {k === 'templates' && 'قوالب'}
                        </span>
                      </label>
                    ))}
                  </div>
                </div>

                <div className="mt-4">
                  <label className="block text-sm mb-1">ملاحظات إضافية</label>
                  <textarea className="w-full rounded-xl p-3 min-h-[80px]" placeholder="أي تفاصيل أخرى تود إضافتها" value={data.notes} onChange={e=>handleChange('notes', e.target.value)} />
                </div>
              </div>
            </section>

            {/* زر الإرسال */}
            <div className="flex justify-center">
              <button onClick={handleSubmit} disabled={sending}
                className={`btn-send px-6 py-3 rounded-2xl shadow ${sending ? 'opacity-70 cursor-not-allowed':''}`}>
                {sending ? 'جارٍ الإرسال…' : 'إرسال'}
              </button>
            </div>
          </main>

          <footer className="max-w-5xl mx-auto px-4 py-10 text-center text-[color:var(--subtle)]">
            <p>صُمّم بواسطة صلاح/ChatGPT — واجهة RTL داكنة لجمع متطلبات شعار احترافي.</p>
          </footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<LogoBriefForm />);
  </script>
</body>
</html>
